# AI 03 运行行为树-请求执行
## 目录
[TOC]

## 参考
@左未 [【图解UE4源码】 其三（一）行为树系统执行任务的流程 发起执行请求](https://zhuanlan.zhihu.com/p/372256253)  

## 常见的2种请求执行的位置
1. 运行新行为树,加载完树资源后触发
```
bool UBehaviorTreeComponent::PushInstance(UBehaviorTree& TreeAsset)
{
    RequestExecution(RootNode, ActiveInstanceIdx, RootNode, 0, EBTNodeResult::InProgress);
}
```

2. 任务节点完成时触发
```
void UBehaviorTreeComponent::OnTaskFinished(const UBTTaskNode* TaskNode, EBTNodeResult::Type TaskResult)
{
    RequestExecution(TaskResult);
}
```

## 请求执行
```
void UBehaviorTreeComponent::RequestExecution(
    UBTCompositeNode* RequestedOn, 
    int32 InstanceIdx, 
    const UBTNode* RequestedBy,
    int32 RequestedByChildIndex, 
    EBTNodeResult::Type ContinueWithResult, 
    bool bStoreForDebugger)
{

}
```