# UE4渲染模块 05 静态光照
静态光/阴影是在编辑器里预计算的,储存于lightmap  

光照贴图的优点:  
+ 无需运行时计算,节省性能  

光照贴图的缺点:  
+ 占用内存  
+ 预计算时间长,每移动一个物件,都需要重新 build lightmap  
+ 非常大的模型可能会没有足够的空间存储光照贴图  

光照贴图本质上是一张纹理,是一张烘焙有光照和阴影信息的图片,类似于纹理的UV采样  
我们也会对存于模型上的光照UV坐标进行采样,将采样结果乘以固有色得到有光照的渲染效果  

对于光图的烘焙过程,可以通过下面的方法来提升速度:  
+ 降低光图分辨率  
+ 减少灯光或场景内物件数量  
+ build时仅使用preview方式  
+ 灯光设置较小的衰减半径与光源半径  

光图主要针对直接光生成的光照纹理,对于因多次反射产生的间接光,UE使用间接光照缓存进行处理  
对于移动中的物体,间接光照缓存的光照信息能弥补lightmap的不足  
UE4采用布置采样点的方式来生成间接光照缓存  

对于任何物体,都会找到离他最近的采样点,查询它的亮度信息,然后将采样结果与物体自身颜色进行混合  

间接光照缓存是build lightmap时同时做的,采样点会在lightmass importance volume范围内生成  
采样点不是等密度的,地面多余空中  
